<!DOCTYPE html>
<html>
  <head>
    <title>KendoIppon</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.18.1/build/cssreset/cssreset-min.css">
    <%= stylesheet_link_tag 'application', media: 'all' %>
    <%= javascript_pack_tag 'application' %>
    <meta charset="UTF-8" />
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>

  </head>

  <body>
  <header class='top-page-header'> 
    <div class='search-bar-contents'>
      <%= link_to image_tag("kendo.png", class: "ippon-icon"), "/",name: "link" %>
    </div> 
    <div class="how-to-use">
      <p class="list-top">使い方</p>
    <div id="root">wait...</div>
    <script type="text/babel">
    let dom = document.querySelector('#root');

class Main extends React.Component {
  render() {
    // const image = require('./image1.png');
    const lessonList = [
      {
        name: '一、動画投稿',
        image: 'https://kendo1992.s3-ap-northeast-1.amazonaws.com/image1.png',
        introduction: '自分の動画を投稿しよう。',
      },
      {
        name: '二、比較・記録',
        image: 'https://d2aj9sy12tbpym.cloudfront.net/progate/shared/images/slide/react/study/1/1548411826972.png',
        introduction: '技に応じた動画が表示されるので比較しよう。上級者との差、自分の改善点を記録しよう。\n自身で比較したい動画を選択することもできます。\n公開非公開を選べます。',
      },
      {
        name: '三、コメント',
        image: 'http://www.komeda.co.jp/images_r/main_ph.png?id=20180601',
        introduction: '他人の動画を見てコメントしよう。\n言語化すること、アドバイスをもらうことで上達しよう。',
      },
      {
        name: '四、クイズ',
        image: 'http://www.kendo-ippon.com/assets/image4-59b079e015fbae05a4ee95ffedaf1028ce5955b8f9b1d6ad9285ff6e28d6fe91.png',
        introduction: '動画を見て一本かどうか答えよう。\n正解するとレベルがアップしていきます。',
      },
    ];
    return (
      <div className='main-wrapper'>
        <div className='main'>
          <div className='lesson-container'>
            {lessonList.map((lessonItem) => {
              return (
                <Lesson
                  name={lessonItem.name}
                  image={lessonItem.image}
                  introduction={lessonItem.introduction}
                />
              );
            })}
          </div>
        </div>
      </div>
    );
  }
}
class Lesson extends React.Component {
  constructor(props) {
    super(props);
    this.state = {isModalOpen: false};
  }
  handleClickStep() {
    this.setState({isModalOpen: true});
  }
  handleClickClose() {
    this.setState({isModalOpen: false});
  }
  render() {
    let modal;
    if (this.state.isModalOpen) {
      modal = (
        <div className='modal' onClick={() => {this.handleClickClose()}}>
          <div className='modal-inner'>
            <div className='modal-sub'>
              <div className='modal-header'></div>
              <div className='modal-introduction'>
                <h2>{this.props.name}</h2>
                <p style={{ whiteSpace: "pre-line" }}>{this.props.introduction}</p>
                <img src={this.props.image} />
              </div>
            </div>
          </div>
        </div>
      );
    }
    return (
      <div className='lesson-card'>
        <div
          className='lesson-item'
          onClick={() => {this.handleClickStep()}}
        >
          <p>{this.props.name}</p>
        </div>
        {modal}
      </div>
    );
  }
}
let el = (
  <div>
    <Main />
  </div>
);
ReactDOM.render(el, dom);
</script>

    </div>







  <%if user_signed_in? %>
    <div class="user"> 
    </div>
  <%end%> 
    <div class='nav'>
      <ul class='lists-right'>
        <%if user_signed_in?%>
            <li class="list-top"><%= link_to "#{current_user.nickname}", user_path(current_user.id),class: "user_link",name: "link" %></li>
            <li class="list-top"><%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class: "logout" ,name: "link" %></li>
        <%else%>
          <li class="list-top"><%= link_to 'ゲストログイン', "/users/guest_sign_in", method: :post %></li>
          <li class="list-top"><%= link_to 'ログイン', new_user_session_path, class: "login" %></li>
          <li class="list-top"><%= link_to '新規登録', new_user_registration_path , class: "sign-up" %></li>
        <%end%>
      </ul>
    </div>
</header>

    <%= yield %>

    <footer>
      <h2 class='footer-content-head'>〜比較・記録・改善で上達しよう〜</h2>
      <ul class='lists'>
        <li><%= link_to '剣道一本について', "#", class: "nippon_link" ,name: "link"%></li>
        <li><%= link_to '全日本剣道連盟', "https://www.kendo.or.jp/", target: "_blank", rel: "noopener noreferrer",class: "nippon_link" ,name: "link"%></li>
      </ul>
      <p class="kendo-ippon">© Kendo-Ippon 2020</p>
    </footer>
  </body>
</html>
